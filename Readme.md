# NLP Chatbot with Dialogflow

A full-stack chatbot application for a restaurant, featuring:

- **Dialogflow Integration:** Natural language queries for placing and tracking orders.
- **FastAPI Backend:** Handles Dialogflow webhook requests, manages orders, and interacts with the database.
- **Database Support:** PostgreSQL (primary) and MySQL scripts for storing menu, orders, and tracking status.
- **PDF Bill Generation:** Automatically generates a PDF bill for each completed order.
- **Frontend:** Simple HTML/CSS interface with an embedded Dialogflow chatbot.

---

## Project Structure

```plaintext
NLP_CHATBOT_DIALOGFLOW/
│
├── backend/                 # FastAPI backend and helpers
│   ├── billGen.py
│   ├── db_helper.py
│   ├── generic_helper.py
│   ├── main.py
│   ├── pandeyji_eatery.sql
│   ├── requirements.txt
│   └── extra/extra.py
│
├── bill/                    # Generated PDF bills
│   └── order_x_bill.pdf
│
├── configs/                 # Configurations
│   └── settings.py
│
├── db/                      # Database scripts
│   ├── pandeyji_eatery_pg.sql
│   └── pandeyji_eatery.sql
│
├── dialogflow_assets/       # Dialogflow training data
│   └── training_phrases.txt
│
├── frontend/                # Frontend files
│   ├── banner.jpg
│   ├── home.html
│   ├── menu1.jpg
│   ├── menu2.jpg
│   ├── menu3.jpg
│   └── styles.css
│
├── ngrok/                   # Ngrok for exposing localhost
│
├── .env                     # Environment variables (DB config, bill path, etc.)
├── .gitignore
└── Readme.md
```

---

## Getting Started

### 1. Clone the Repository

```sh
git clone <repo-url>
cd NLP_CHATBOT_DIALOGFLOW
```

### 2. Configure Environment

Edit the `.env` file with your PostgreSQL credentials and bill storage path.  
**Example:**
```env
DB_HOST=localhost
DB_PORT=5432
DB_USER=your_user
DB_PASSWORD=your_password
DB_NAME=pandeyji_eatery
BILL_STORAGE_PATH=./bill
```

### 3. Set Up the Database

- **PostgreSQL:**
  ```sh
  psql -U <username> -d <database> -f db/pandeyji_eatery_pg.sql
  ```
- **MySQL:**
  ```sh
  mysql -u <username> -p < database_name < db/pandeyji_eatery.sql
  ```

### 4. Install Backend Dependencies

```sh
cd backend
pip install -r requirements.txt
```

### 5. Run the FastAPI Server

```sh
python -m uvicorn backend.main:app --reload
```

### 6. Expose Localhost for Dialogflow Webhook

Use [ngrok](https://ngrok.com/) to expose your FastAPI server:
```sh
./ngrok http 8000
```
Copy the HTTPS URL generated by ngrok and set it as the webhook URL in Dialogflow.

### 7. Connect Dialogflow

- Import intents and training phrases from `dialogflow_assets/training_phrases.txt`.
- Set the webhook URL in Dialogflow to your ngrok HTTPS endpoint.

### 8. Use the Frontend

Open `frontend/home.html` in your browser to interact with the chatbot.

---

## Bill Generation

PDF bills are generated automatically in the directory specified by `BILL_STORAGE_PATH` in `.env`.  
**Example output:** `bill/order_<id>_bill.pdf`

---

## License

Contact me Via linkedin for productional use and help of the codebase.

---

